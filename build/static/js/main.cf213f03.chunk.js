(this.webpackJsonpmarit_expert=this.webpackJsonpmarit_expert||[]).push([[0],{14:function(e,n,t){e.exports={wrapper:"unit_wrapper__3J0lS",imaga:"unit_imaga__30Pv4",btns:"unit_btns__1nAjB"}},17:function(e,n,t){e.exports={new_name:"addunit_new_name__xCiqI",wrapper:"addunit_wrapper__tQojA",btnsWrapper:"addunit_btnsWrapper__2pN-n",newName:"addunit_newName__AKTQU"}},25:function(e,n,t){e.exports={wrapper:"editname_wrapper__WzLCz",newNameInput:"editname_newNameInput__12_WD"}},26:function(e,n,t){e.exports={wrapper:"race_wrapper__3mmEV",btnWrapper:"race_btnWrapper__2VBAK"}},32:function(e,n,t){e.exports={wrapper:"showname_wrapper__t9rNz"}},33:function(e,n,t){e.exports={grid:"multiracial_grid__Bj_EF"}},34:function(e,n,t){e.exports={main:"app_main__3Ig1G"}},44:function(e,n,t){},45:function(e,n,t){},51:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t(0),c=t.n(a),i=t(18),s=t.n(i),o=(t(44),t(45),"_REQUEST"),u="_FAILURE",d="_SUCCESS",l="LOAD_UNITS",j="ADD_UNIT",b="DELETE_UNIT",p="RENAME_UNIT",m="Hobbit",f="Human",O="Dworf",x=t(7),_=function(e){return e.units.loading},h=function(e){return e.units.loaded},v=function(e){return e.units.error},w=function(e){return e.units.entities.filter((function(e){return e.race===m}))},N=function(e){return e.units.entities.filter((function(e){return"Elf"===e.race}))},g=function(e){return e.units.entities.filter((function(e){return e.race===O}))},y=function(e){return e.units.entities.filter((function(e){return e.race===f}))},I=t(11),E=t(14),U=t.n(E),k=t(32),S=t.n(k),C=function(e){var n=e.name;e.id,e.deleteUnit;return Object(r.jsxs)("div",{className:S.a.wrapper,children:["\u0418\u043c\u044f: ",n]})},T=t(25),W=t.n(T),A=Object(x.b)(null,(function(e){return{renameUnit:function(n){var t=n.newName,r=n.id;return e(function(e){var n=e.newName,t=e.id;return{type:p,payload:{name:n,id:t}}}({newName:t,id:r}))}}}))((function(e){var n=e.id,t=e.name,c=e.renameUnit,i=e.setEditNameFlag,s=Object(a.useState)(""),o=Object(I.a)(s,2),u=o[0],d=o[1];return Object(r.jsxs)("div",{className:W.a.wrapper,children:[Object(r.jsxs)("label",{children:["\u0418\u043c\u044f:",Object(r.jsx)("input",{className:W.a.newNameInput,type:"text",name:"name",placeholder:t,onChange:function(e){return d(e.currentTarget.value)}})]}),Object(r.jsx)("button",{onClick:function(e){return i(!1),c({newName:u,id:n})},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})),D=Object(x.b)(null,(function(e){return{deleteUnit:function(n){return e(function(e){return{type:b,payload:e}}({id:n}))}}}))((function(e){var n=e.name,t=e.id,c=e.deleteUnit,i=Object(a.useState)(!1),s=Object(I.a)(i,2),o=s[0],u=s[1];return Object(r.jsxs)("div",{className:U.a.wrapper,children:[Object(r.jsx)("div",{className:U.a.imaga}),o?Object(r.jsx)(A,{id:t,name:n,setEditNameFlag:u}):Object(r.jsx)(C,{id:t,name:n}),Object(r.jsxs)("div",{className:U.a.btns,children:[Object(r.jsx)("button",{className:U.a.edit_btn,onClick:function(e){return u((function(){return!o}))},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(r.jsx)("button",{className:U.a.delete_btn,onClick:function(e){return c(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})})),B=t(10),F=t(26),L=t.n(F),J=function(e){var n=e.units,t=e.race,c=Object(a.useState)(!1),i=Object(I.a)(c,2),s=i[0],o=i[1];return Object(r.jsxs)("div",{className:L.a.wrapper,children:["race: ",t,Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:L.a.btnWrapper,children:Object(r.jsx)(B.b,{to:"/".concat(t),children:Object(r.jsx)("button",{onClick:function(e){return o((function(){return!s}))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})})}),n.map((function(e){return Object(r.jsx)(D,{id:e.id,name:e.name},e.id)}))]})},R=t(33),z=t.n(R);var M=Object(x.b)((function(e){return{hobbits:w(e),elfs:N(e),dworfs:g(e),humans:y(e)}}))((function(e){var n=e.hobbits,t=e.dworfs,a=e.humans,c=e.elfs;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)("div",{className:z.a.grid,children:[Object(r.jsx)(J,{race:m,units:n}),Object(r.jsx)(J,{race:f,units:a}),Object(r.jsx)(J,{race:O,units:t}),Object(r.jsx)(J,{race:"Elf",units:c})]})})})),Q=t(3),G=function(){return Object(r.jsx)("div",{children:"LOADING..."})},H=t(17),K=t.n(H),V=Object(x.b)(null,(function(e){return{addUnit:function(n){var t=n.name,r=n.race;return e(function(e){var n=e.name,t=e.race;return{type:j,generateId:"id",payload:{name:n,race:t}}}({name:t,race:r}))}}}))((function(e){var n=e.addUnit,t=e.match,c=Object(a.useState)(!1),i=Object(I.a)(c,2),s=i[0],o=i[1],u=t.params.race;return Object(r.jsxs)("div",{className:K.a.wrapper,children:[Object(r.jsxs)("label",{children:[Object(r.jsx)("span",{children:"Name:"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("input",{className:K.a.newName,type:"text",name:"name",onChange:function(e){return o(e.currentTarget.value)}})]}),Object(r.jsxs)("div",{className:K.a.btnsWrapper,children:[Object(r.jsx)(B.b,{to:"/",children:Object(r.jsx)("button",{children:"\u041d\u0430\u0437\u0430\u0434"})}),Object(r.jsx)(B.b,{to:"/",children:Object(r.jsx)("button",{className:K.a.addBtn,onClick:function(e){return s&&n({name:s,race:u})},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})]})})),q=t(34),P=t.n(q);var X=Object(x.b)((function(e){return{loading:_(e),loaded:h(e),error:v(e)}}),{loadUnits:function(){return function(e){var n=new WebSocket("ws://testapi.marit.expert:3004");n.onopen=function(t){n.send({cmd:"get_list"}),e({type:l+o})},n.onmessage=function(n){var t=n.data;e({type:l+d,payload:t})},n.onclose=function(e){e.wasClean?console.log("close: ".concat(e.code," reason=").concat(e.reason)):console.log("disconnection")},n.onerror=function(n){console.log("[error] ".concat(n.message)),e({type:l+u,payload:n})}}}})((function(e){var n=e.loadUnits,t=e.loading,c=e.loaded;return e.error,Object(a.useEffect)((function(){c||n()}),[]),t||!c?Object(r.jsx)(G,{}):Object(r.jsxs)("div",{className:P.a.main,children:[Object(r.jsx)(Q.a,{path:"/",exact:!0,component:M}),Object(r.jsx)(Q.a,{path:"/:race",exact:!0,component:V})]})})),Y=t(9),Z=t(35),$=t(21),ee=t(13),ne=t(38),te=t(53),re=t(36),ae=t(29),ce=t(37),ie={loading:!1,error:null,loaded:!1,entities:{}},se=Object(Y.combineReducers)({units:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1?arguments[1]:void 0;return Object(ce.a)(e,(function(t){var r=n.type,a=n.error,c=n.key,i=n.payload;switch(r){case l+o:t.loading=!0,t.loaded=!1,t.error=null;break;case l+u:t.loading=!1,t.loaded=!1,t.error=a;break;case l+d:t.loading=!1,t.loaded=!0,t.error=null,t.entities=JSON.parse(i);break;case b:var s=e.entities.findIndex((function(e){return i.id===e.id})),m=Object(ae.a)(e.entities);m.splice(s,1),t.entities=m;break;case p:var f=e.entities.findIndex((function(e){return i.id===e.id}));t.entities[f].name=i.name;break;case j:var O={id:c,name:i.name,race:i.race};return Object(ee.a)(Object(ee.a)({},e),{},{entities:[].concat(Object(ae.a)(e.entities),[O])});default:return e}}))}}),oe=Object(Y.applyMiddleware)(Z.a,(function(e){return function(e){return function(n){if(!n.generateId)return e(n);n.generateId;var t=Object(ne.a)(n,["generateId"]);return e(Object(ee.a)(Object(ee.a)({},t),{},Object($.a)({},"key",Object(te.a)())))}}})),ue=Object(Y.createStore)(se,Object(re.composeWithDevTools)(oe));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(x.a,{store:ue,children:Object(r.jsx)(B.a,{children:Object(r.jsx)(X,{})})})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.cf213f03.chunk.js.map